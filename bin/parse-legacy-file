#!/usr/bin/env bash

get_legacy_version() {
  current_file="$1"
  basename=$(basename -- "$current_file")

  if [ "$basename" == "go.mod" ]; then
    grep 'go\s*[0-9]' "$current_file" |
      sed -E \
          -e 's/.*heroku goVersion //' \
          -e 's/[[:space:]]//' \
          -e 's/go//' |
      head -1
  else
    cat "$current_file"
  fi
}

get_legacy_version "$1"
